<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[WIP] G-YNTHETIC ARCHIVE | Secure Vault</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .vault-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .key-input-sector {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid var(--accent-cyan);
            padding: 2rem;
            margin-bottom: 3rem;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.1);
        }

        .key-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--accent-cyan);
            color: var(--accent-cyan);
            font-family: var(--font-mono);
            font-size: 1.5rem;
            text-align: center;
            padding: 0.5rem;
            width: 100%;
            max-width: 400px;
            margin-top: 1rem;
            outline: none;
            letter-spacing: 0.2em;
        }

        .archive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .folder-card {
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .folder-card.locked {
            opacity: 0.4;
            filter: grayscale(1);
            cursor: not-allowed;
            border-style: dashed;
        }

        .folder-card.unlocked {
            opacity: 1;
            filter: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 15px rgba(132, 204, 22, 0.1);
        }

        .file-list {
            margin-top: 1rem;
            list-style: none;
            font-size: 0.85rem;
            max-height: 200px;
            overflow-y: auto;
        }

        .file-item {
            padding: 0.4rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
        }

        .file-item a {
            color: var(--text-dim);
            text-decoration: none;
            pointer-events: none;
        }

        .unlocked .file-item a {
            color: var(--accent-cyan);
            pointer-events: auto;
        }

        .unlocked .file-item a:hover {
            color: var(--text-main);
            text-decoration: underline;
        }

        .lock-icon {
            font-size: 1.2rem;
            margin-right: 0.5rem;
        }

        .status-msg {
            margin-top: 1rem;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--accent-purple);
        }

        /* ANTI-EXFILTRATION LAYER */
        body {
            user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }

        .vault-container.blurred {
            filter: blur(20px);
            pointer-events: none;
        }

        /* WATERMARK LAYER */
        .watermark {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10001;
            /* Above EVERYTHING including NDA and blur */
            opacity: 0.12;
            font-family: var(--font-mono);
            font-size: 1.2rem;
            color: #fff;
            overflow: hidden;
            background-color: transparent;
        }

        .watermark-text {
            position: absolute;
            transform: rotate(-25deg);
            white-space: nowrap;
            font-weight: bold;
            text-shadow: 0 0 5px #000;
        }

        /* NDA GATEWAY */
        #nda-gateway {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .nda-content {
            max-width: 600px;
            text-align: center;
        }

        .hidden {
            display: none !important;
        }

        @media print {
            body {
                display: none !important;
            }
        }
    </style>
</head>

<body oncontextmenu="return false;">
    <div id="main-vault" class="vault-container">
        <header style="height: auto; padding: 4rem 0;">
            <h1 class="glitch-title" style="font-size: 2.5rem;">PUBLIC DISCLOSURE</h1>
            <p class="subtitle">UNRESTRICTED PRIOR ART ARCHIVE</p>
        </header>

        <div class="key-input-sector reveal active" style="border-color: var(--accent-green);">
            <p class="section-subtitle" style="color: var(--accent-green); font-weight: bold;">ENABLING DISCLOSURE
                ACTIVE</p>
            <p style="font-size: 0.8rem; margin: 1rem 0; line-height: 1.6;">
                This archive has been unsealed to serve as defensible prior art. All technical specifications,
                architectural blueprints, and source code modules are now publicly accessible to ensure reproducibility.
            </p>
            <a href="REPRODUCTION_GUIDE.md" class="btn-primary"
                style="display: inline-block; margin-top: 1rem; padding: 0.8rem 2rem;">VIEW REPRODUCTION GUIDE</a>
        </div>

        <div id="archive-root" class="archive-grid">
            <!-- Populated by JS -->
        </div>

        <footer style="margin-top: 5rem;">
            <a href="index.html" class="btn-primary" style="padding: 0.5rem 1.5rem; font-size: 0.7rem;">Return to
                Terminal</a>
            <p class="copyright">&copy; 2026 G-YNTHETIC LABS. PUBLIC DISCLOSURE. ALL ASSETS UNRESTRICTED.</p>
        </footer>
    </div>

    <script src="assets/docs-manifest.js"></script>
    <script>
        const archiveRoot = document.getElementById('archive-root');

        function decode(str) {
            try { return atob(str); } catch (e) { return str; }
        }

        function renderArchive() {
            archiveRoot.innerHTML = '';

            // Only one level (0) exists now
            const tierRaw = DOCS_MANIFEST.levels["0"];
            if (!tierRaw) return;

            const tier = {
                name: decode(tierRaw.name),
                files: tierRaw.files.map(f => ({
                    title: decode(f.title),
                    path: decode(f.path),
                    extension: decode(f.extension),
                    category: decode(f.category)
                }))
            };

            const card = document.createElement('div');
            card.className = `folder-card reveal active unlocked`;
            card.style.gridColumn = "1 / -1"; // Full width for the unified list

            const groupedFiles = {};
            tier.files.forEach(file => {
                const group = file.category || "General";
                if (!groupedFiles[group]) groupedFiles[group] = [];
                groupedFiles[group].push(file);
            });

            let fileListHTML = '';
            // Sort categories for better organization
            const sortedCategories = Object.keys(groupedFiles).sort();

            sortedCategories.forEach(subCat => {
                fileListHTML += `
                    <div style="margin-top: 2rem;">
                        <h4 style="font-size: 0.7rem; color: var(--accent-cyan); letter-spacing: 2px; border-bottom: 1px solid rgba(0, 240, 255, 0.2); padding-bottom: 0.5rem;">// ${subCat.toUpperCase()}</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; margin-top: 1rem;">
                `;
                fileListHTML += groupedFiles[subCat].map(file => `
                    <div class="file-item" style="background: rgba(255,255,255,0.02); padding: 0.8rem; border-left: 2px solid var(--accent-cyan);">
                        <div style="display: flex; flex-direction: column;">
                            <a href="${file.path}" target="_blank" style="font-family: var(--font-mono); font-size: 0.8rem; pointer-events: auto; color: var(--accent-cyan);">${file.title}</a>
                            <span style="font-size: 0.6rem; color: rgba(255,255,255,0.3); margin-top: 0.3rem;">FORMAT: ${file.extension.replace('.', '')} // PUBLIC ACCESS</span>
                        </div>
                    </div>
                `).join('');
                fileListHTML += `</div></div>`;
            });

            card.innerHTML = `
                <div style="display:flex; align-items:center; margin-bottom: 1rem;">
                    <span class="lock-icon" style="color: var(--accent-green)">ðŸ“‚</span>
                    <h3 style="margin:0; font-size: 1.2rem; color: var(--text-main)">${tier.name}</h3>
                </div>
                <div style="font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-green); margin-bottom: 2rem;">
                    [ STATUS: UNRESTRICTED ] [ TOTAL ASSETS: ${DOCS_MANIFEST.metadata.total_files} ]
                </div>
                ${fileListHTML || '<p>NO ASSETS IN THIS SECTOR</p>'}
            `;

            archiveRoot.appendChild(card);
        }

        // Initial render
        renderArchive();
    </script>
</body>

</html>